import pprint
from transformers import pipeline
from googletrans import Translator
import torch

# 한글 샘플 문장 (100개 이상, 긍정/부정/중립/강약/일상/정치/사회 등 다양하게)
korean_texts = [
    # 부정
    "이 정책은 정말 최악이다.",
    "나는 이 결정에 매우 실망했다.",
    "이 제품은 쓸모없다.",
    "회의 결과가 형편없다.",
    "정말 짜증나는 하루였다.",
    "이 영화는 너무 지루했다.",
    "서비스가 엉망이었다.",
    "정치인들의 행동이 실망스럽다.",
    "이 법안은 국민을 무시한다.",
    "이런 일은 다시는 일어나지 말아야 한다.",
    "오늘 뉴스는 우울했다.",
    "이 회사는 신뢰할 수 없다.",
    "정말 화가 난다.",
    "이런 결과는 받아들일 수 없다.",
    "이 정책은 실패작이다.",
    "회의가 너무 길고 비효율적이었다.",
    "이런 서비스는 처음이다. 너무 별로다.",
    "정말 최악의 경험이었다.",
    "이런 태도는 용납할 수 없다.",
    "이 제품은 돈이 아깝다.",
    # 긍정
    "이 정책은 정말 훌륭하다.",
    "나는 이 결정에 매우 만족한다.",
    "이 제품은 정말 유용하다.",
    "회의 결과가 매우 좋았다.",
    "정말 행복한 하루였다.",
    "이 영화는 감동적이었다.",
    "서비스가 훌륭했다.",
    "정치인들의 행동이 인상적이다.",
    "이 법안은 국민을 배려한다.",
    "이런 일은 자주 일어나야 한다.",
    "오늘 뉴스는 희망적이었다.",
    "이 회사는 신뢰할 수 있다.",
    "정말 기쁘다.",
    "이런 결과는 환영할 만하다.",
    "이 정책은 성공적이다.",
    "회의가 짧고 효율적이었다.",
    "이런 서비스는 처음이다. 너무 좋다.",
    "정말 최고의 경험이었다.",
    "이런 태도는 본받을 만하다.",
    "이 제품은 값어치를 한다.",
    # 중립/사실
    "오늘은 평범한 하루였다.",
    "회의가 예정대로 진행되었다.",
    "이 제품은 일반적이다.",
    "정치인들이 모여 회의를 했다.",
    "이 법안은 국회에 제출되었다.",
    "뉴스에서 새로운 소식을 들었다.",
    "이 회사는 최근에 설립되었다.",
    "정책이 발표되었다.",
    "회의가 끝났다.",
    "서비스가 제공되었다.",
    # 강한 부정
    "이 결정은 정말 끔찍하다.",
    "이 영화는 인생 최악이었다.",
    "이런 실수는 용서할 수 없다.",
    "정말 참담한 결과다.",
    "이 정책은 국민을 배신했다.",
    "이 회사는 고객을 무시한다.",
    "정치인들의 거짓말에 분노한다.",
    "이런 상황은 절망적이다.",
    "이 제품은 완전히 망작이다.",
    "서비스가 최악이었다.",
    # 강한 긍정
    "이 결정은 정말 훌륭하다.",
    "이 영화는 인생 최고의 작품이다.",
    "이런 성공은 드물다.",
    "정말 감동적인 결과다.",
    "이 정책은 국민을 구했다.",
    "이 회사는 고객을 최우선으로 생각한다.",
    "정치인들의 진심에 감동했다.",
    "이런 상황은 기적적이다.",
    "이 제품은 완벽하다.",
    "서비스가 최고였다.",
    # 일상/사회/정치/경제/문화 등 다양한 상황
    "오늘 점심은 맛있었다.",
    "버스를 놓쳐서 아쉬웠다.",
    "친구와 영화를 봤다.",
    "주식 시장이 하락했다.",
    "날씨가 맑았다.",
    "비가 와서 산책을 못 했다.",
    "새로운 스마트폰이 출시되었다.",
    "가족과 시간을 보냈다.",
    "회의에서 발표를 했다.",
    "정치 뉴스가 많았다.",
    "경제가 회복되고 있다.",
    "문화 행사가 열렸다.",
    "스포츠 경기를 관람했다.",
    "도서관에서 책을 읽었다.",
    "영화관이 붐볐다.",
    "카페에서 커피를 마셨다.",
    "지하철이 혼잡했다.",
    "택배가 도착했다.",
    "인터넷이 느렸다.",
    "휴대폰을 잃어버렸다.",
    # 추가 샘플 (긍정/부정/중립 골고루)
    "오늘은 정말 즐거운 하루였다.",
    "회의가 지루했다.",
    "이 제품은 기대 이하였다.",
    "정치인의 연설이 인상 깊었다.",
    "서비스가 빨랐다.",
    "음식이 맛없었다.",
    "친절한 직원 덕분에 기분이 좋았다.",
    "택시가 늦게 왔다.",
    "새로운 정책이 발표되었다.",
    "뉴스가 흥미로웠다.",
    "오늘은 특별한 일이 없었다.",
    "회의가 순조롭게 진행되었다.",
    "이 영화는 평범했다.",
    "정치 뉴스가 실망스러웠다.",
    "경제 뉴스가 희망적이었다.",
    "문화 행사가 취소되었다.",
    "스포츠 경기에서 이겼다.",
    "도서관이 조용했다.",
    "카페가 붐볐다.",
    "지하철이 한산했다.",
    "택배가 늦게 도착했다.",
    "인터넷이 빨랐다.",
    "휴대폰을 찾았다.",
    "오늘은 피곤했다.",
    "회의가 유익했다.",
    "이 제품은 만족스럽다.",
    "정치인의 연설이 실망스러웠다.",
    "서비스가 느렸다.",
    "음식이 훌륭했다.",
    "친절하지 않은 직원 때문에 기분이 나빴다.",
    "택시가 빨리 왔다.",
    "새로운 정책이 실망스럽다.",
    "뉴스가 지루했다.",
    "오늘은 바빴다.",
    "회의가 길었다.",
    "이 영화는 재미있었다.",
    "정치 뉴스가 흥미로웠다.",
    "경제 뉴스가 실망스러웠다.",
    "문화 행사가 성공적이었다.",
    "스포츠 경기에서 졌다.",
    "도서관이 붐볐다.",
    "카페가 조용했다.",
    "지하철이 고장 났다.",
    "택배가 분실되었다.",
    "인터넷이 끊겼다.",
    "휴대폰이 고장 났다.",
]

# 1. 한글 문장 영어로 번역
translator = Translator()
english_texts = []
for text in korean_texts:
    try:
        en = translator.translate(text, src='ko', dest='en').text
        english_texts.append(en)
    except Exception as e:
        english_texts.append("")
        print(f"번역 실패: {text} -> {e}")

print("\n[한글→영어 번역 결과]")
for ko, en in zip(korean_texts, english_texts):
    print(f"- {ko}\n  → {en}")

# 2. 감정분석 모델: BERT-Multilingual-5star만 사용
models = [
    ("nlptown/bert-base-multilingual-uncased-sentiment", "BERT-Multilingual-5star"),
]

# 3. 각 모델별 감정분석 결과 비교 (GPU 자동 사용)
results_table = []
device = 0 if torch.cuda.is_available() else -1
for model_name, model_desc in models:
    print(f"\n=== {model_desc} ({model_name}) ===")
    try:
        clf = pipeline("sentiment-analysis", model=model_name, device=device)
        row = [model_desc]
        for text in english_texts:
            if not text:
                row.append("번역실패")
                continue
            result = clf(text)
            row.append(f"{result[0]['label']} ({result[0]['score']:.2f})")
        results_table.append(row)
    except Exception as e:
        print(f"모델 로딩 실패: {e}")
        results_table.append([model_desc] + ["모델실패"]*len(english_texts))

# 4. 표 형태로 결과 출력
print("\n[모델별 감정분석 결과 비교표]")
header = ["모델명"] + [f"샘플{i+1}" for i in range(len(korean_texts))]
print("\t".join(header))
for row in results_table:
    print("\t".join(row)) 